# citypay-api

[![Build Status](https://api.travis-ci.com/citypay/citypay-api-client-js.svg?branch=master)](https://app.travis-ci.com/github/citypay/citypay-api-client-js)
Citypay Api Client - JavaScript client for citypay-api

This CityPay API is a HTTP RESTful payment API used for direct server to server transactional processing. It
provides a number of payment mechanisms including: Internet, MOTO, Continuous Authority transaction processing,
3-D Secure decision handling using RFA Secure, Authorisation, Refunding, Pre-Authorisation, Cancellation/Voids and
Completion processing. The API is also capable of tokinsed payments using Card Holder Accounts.

## Compliance and Security
Your application will need to adhere to PCI-DSS standards to operate safely and to meet requirements set out by 
Visa and MasterCard and the PCI Security Standards Council. These include

* Data must be collected using TLS version 1.2 using [strong cryptography](#enabled-tls-ciphers). We will not accept calls to our API at
  lower grade encryption levels. We regularly scan our TLS endpoints for vulnerabilities and perform TLS assessments
  as part of our compliance program.
* The application must not store sensitive card holder data (CHD) such as the card security code (CSC) or
  primary access number (PAN)
* The application must not display the full card number on receipts, it is recommended to mask the PAN
  and show the last 4 digits. The API will return this for you for ease of receipt creation
* If you are developing a website, you will be required to perform regular scans on the network where you host the
  application to meet your compliance obligations
* You will be required to be PCI Compliant and the application must adhere to the security standard. Further information
  is available from [https://www.pcisecuritystandards.org/](https://www.pcisecuritystandards.org/)
* The API verifies that the request is for a valid account and originates from a trusted source using the remote IP
  address. Our application firewalls analyse data that may be an attempt to break a large number of security common
  security vulnerabilities.

This SDK is automatically generated by the [OpenAPI Generator](https://openapi-generator.tech) project:

- API version: 6.4.7
- Package version: 1.2.1
- Build date: 2022-11-01T21:31:29.276198Z[Etc/UTC]
- Build package: org.openapitools.codegen.languages.JavascriptClientCodegen
For more information, please visit [https://citypay.com/customer-centre/technical-support.html](https://citypay.com/customer-centre/technical-support.html)

## Installation

### For [Node.js](https://nodejs.org/)

#### npm

To publish the library as a [npm](https://www.npmjs.com/), please follow the procedure in ["Publishing npm packages"](https://docs.npmjs.com/getting-started/publishing-npm-packages).

Then install it via:

```shell
npm install citypay-api --save
```

Finally, you need to build the module:

```shell
npm run build
```

##### Local development

To use the library locally without publishing to a remote npm registry, first install the dependencies by changing into the directory containing `package.json` (and this README). Let's call this `JAVASCRIPT_CLIENT_DIR`. Then run:

```shell
npm install
```

Next, [link](https://docs.npmjs.com/cli/link) it globally in npm with the following, also from `JAVASCRIPT_CLIENT_DIR`:

```shell
npm link
```

To use the link you just defined in your project, switch to the directory you want to use your citypay-api from, and run:

```shell
npm link /path/to/<JAVASCRIPT_CLIENT_DIR>
```

Finally, you need to build the module:

```shell
npm run build
```

#### git

If the library is hosted at a git repository, e.g.https://github.com/citypay/citypay-api-client-js
then install it via:

```shell
    npm install citypay/citypay-api-client-js --save
```

### For browser

The library also works in the browser environment via npm and [browserify](http://browserify.org/). After following
the above steps with Node.js and installing browserify with `npm install -g browserify`,
perform the following (assuming *main.js* is your entry file):

```shell
browserify main.js > bundle.js
```

Then include *bundle.js* in the HTML pages.

### Webpack Configuration

Using Webpack you may encounter the following error: "Module not found: Error:
Cannot resolve module", most certainly you should disable AMD loader. Add/merge
the following section to your webpack config:

```javascript
module: {
  rules: [
    {
      parser: {
        amd: false
      }
    }
  ]
}
```

## Getting Started

Please follow the [installation](#installation) instruction and execute the following JS code:

```javascript
import CityPay from 'citypay-api';

let client = new CityPay.ApiClient({
  "sandbox": true,
  "client_id": process.env.CP_CLIENT_ID,
  "licence_key": process.env.CP_LICENCE_KEY
});

let auth_request = new CityPay.AuthRequest();
auth_request.identifier = "example1";

new CityPay.AuthorisationAndPaymentApi(client).authorisationRequest(auth_request).then((data) => {
  console.log('API called successfully. Returned data: ' + data);
}, (error) => {
  console.error(error);
});

```

## Documentation for API Endpoints

All URIs are relative to *https://api.citypay.com*

Class | Method | HTTP request | Description
------------ | ------------- | ------------- | -------------
*Citypay Api Client.AuthorisationAndPaymentApi* | [**authorisationRequest**](docs/AuthorisationAndPaymentApi.md#authorisationRequest) | **POST** /v6/authorise | Authorisation
*Citypay Api Client.AuthorisationAndPaymentApi* | [**binRangeLookupRequest**](docs/AuthorisationAndPaymentApi.md#binRangeLookupRequest) | **POST** /v6/bin | Bin Lookup
*Citypay Api Client.AuthorisationAndPaymentApi* | [**cResRequest**](docs/AuthorisationAndPaymentApi.md#cResRequest) | **POST** /v6/cres | CRes
*Citypay Api Client.AuthorisationAndPaymentApi* | [**captureRequest**](docs/AuthorisationAndPaymentApi.md#captureRequest) | **POST** /v6/capture | Capture
*Citypay Api Client.AuthorisationAndPaymentApi* | [**paResRequest**](docs/AuthorisationAndPaymentApi.md#paResRequest) | **POST** /v6/pares | PaRes
*Citypay Api Client.AuthorisationAndPaymentApi* | [**refundRequest**](docs/AuthorisationAndPaymentApi.md#refundRequest) | **POST** /v6/refund | Refund
*Citypay Api Client.AuthorisationAndPaymentApi* | [**retrievalRequest**](docs/AuthorisationAndPaymentApi.md#retrievalRequest) | **POST** /v6/retrieve | Retrieval
*Citypay Api Client.AuthorisationAndPaymentApi* | [**voidRequest**](docs/AuthorisationAndPaymentApi.md#voidRequest) | **POST** /v6/void | Void
*Citypay Api Client.BatchProcessingApi* | [**batchProcessRequest**](docs/BatchProcessingApi.md#batchProcessRequest) | **POST** /v6/batch/process | Batch Process Request
*Citypay Api Client.BatchProcessingApi* | [**batchReportRequest**](docs/BatchProcessingApi.md#batchReportRequest) | **POST** /v6/batch/retrieve | BatchReportRequest
*Citypay Api Client.BatchProcessingApi* | [**checkBatchStatusRequest**](docs/BatchProcessingApi.md#checkBatchStatusRequest) | **POST** /v6/batch/status | CheckBatchStatus
*Citypay Api Client.CardHolderAccountApi* | [**accountCardDeleteRequest**](docs/CardHolderAccountApi.md#accountCardDeleteRequest) | **DELETE** /v6/account/{accountid}/card/{cardId} | Card Deletion
*Citypay Api Client.CardHolderAccountApi* | [**accountCardRegisterRequest**](docs/CardHolderAccountApi.md#accountCardRegisterRequest) | **POST** /v6/account/{accountid}/register | Card Registration
*Citypay Api Client.CardHolderAccountApi* | [**accountCardStatusRequest**](docs/CardHolderAccountApi.md#accountCardStatusRequest) | **POST** /v6/account/{accountid}/card/{cardId}/status | Card Status
*Citypay Api Client.CardHolderAccountApi* | [**accountChangeContactRequest**](docs/CardHolderAccountApi.md#accountChangeContactRequest) | **POST** /v6/account/{accountid}/contact | Contact Details Update
*Citypay Api Client.CardHolderAccountApi* | [**accountCreate**](docs/CardHolderAccountApi.md#accountCreate) | **POST** /v6/account/create | Account Create
*Citypay Api Client.CardHolderAccountApi* | [**accountDeleteRequest**](docs/CardHolderAccountApi.md#accountDeleteRequest) | **DELETE** /v6/account/{accountid} | Account Deletion
*Citypay Api Client.CardHolderAccountApi* | [**accountExistsRequest**](docs/CardHolderAccountApi.md#accountExistsRequest) | **GET** /v6/account-exists/{accountid} | Account Exists
*Citypay Api Client.CardHolderAccountApi* | [**accountRetrieveRequest**](docs/CardHolderAccountApi.md#accountRetrieveRequest) | **GET** /v6/account/{accountid} | Account Retrieval
*Citypay Api Client.CardHolderAccountApi* | [**accountStatusRequest**](docs/CardHolderAccountApi.md#accountStatusRequest) | **POST** /v6/account/{accountid}/status | Account Status
*Citypay Api Client.CardHolderAccountApi* | [**chargeRequest**](docs/CardHolderAccountApi.md#chargeRequest) | **POST** /v6/charge | Charge
*Citypay Api Client.DirectPostApi* | [**directCResAuthRequest**](docs/DirectPostApi.md#directCResAuthRequest) | **POST** /direct/cres/auth/{uuid} | Handles a CRes response from ACS, returning back the result of authorisation
*Citypay Api Client.DirectPostApi* | [**directCResTokeniseRequest**](docs/DirectPostApi.md#directCResTokeniseRequest) | **POST** /direct/cres/tokenise/{uuid} | Handles a CRes response from ACS, returning back a token for future authorisation
*Citypay Api Client.DirectPostApi* | [**directPostAuthRequest**](docs/DirectPostApi.md#directPostAuthRequest) | **POST** /direct/auth | Direct Post Auth Request
*Citypay Api Client.DirectPostApi* | [**directPostTokeniseRequest**](docs/DirectPostApi.md#directPostTokeniseRequest) | **POST** /direct/tokenise | Direct Post Tokenise Request
*Citypay Api Client.DirectPostApi* | [**tokenRequest**](docs/DirectPostApi.md#tokenRequest) | **POST** /direct/token | Direct Post Token Request
*Citypay Api Client.OperationalFunctionsApi* | [**aclCheckRequest**](docs/OperationalFunctionsApi.md#aclCheckRequest) | **POST** /v6/acl/check | ACL Check Request
*Citypay Api Client.OperationalFunctionsApi* | [**domainKeyCheckRequest**](docs/OperationalFunctionsApi.md#domainKeyCheckRequest) | **POST** /dk/check | Domain Key Check Request
*Citypay Api Client.OperationalFunctionsApi* | [**domainKeyGenRequest**](docs/OperationalFunctionsApi.md#domainKeyGenRequest) | **POST** /dk/gen | Domain Key Generation Request
*Citypay Api Client.OperationalFunctionsApi* | [**listMerchantsRequest**](docs/OperationalFunctionsApi.md#listMerchantsRequest) | **GET** /v6/merchants/{clientid} | List Merchants Request
*Citypay Api Client.OperationalFunctionsApi* | [**pingRequest**](docs/OperationalFunctionsApi.md#pingRequest) | **POST** /v6/ping | Ping Request
*Citypay Api Client.PaylinkApi* | [**tokenAdjustmentRequest**](docs/PaylinkApi.md#tokenAdjustmentRequest) | **POST** /paylink/{token}/adjustment | Paylink Token Adjustment
*Citypay Api Client.PaylinkApi* | [**tokenCloseRequest**](docs/PaylinkApi.md#tokenCloseRequest) | **PUT** /paylink/{token}/close | Close Paylink Token
*Citypay Api Client.PaylinkApi* | [**tokenCreateBillPaymentRequest**](docs/PaylinkApi.md#tokenCreateBillPaymentRequest) | **POST** /paylink/bill-payment | Create Bill Payment Paylink Token
*Citypay Api Client.PaylinkApi* | [**tokenCreateRequest**](docs/PaylinkApi.md#tokenCreateRequest) | **POST** /paylink/create | Create Paylink Token
*Citypay Api Client.PaylinkApi* | [**tokenReconciledRequest**](docs/PaylinkApi.md#tokenReconciledRequest) | **PUT** /paylink/{token}/reconciled | Reconcile Paylink Token
*Citypay Api Client.PaylinkApi* | [**tokenReopenRequest**](docs/PaylinkApi.md#tokenReopenRequest) | **PUT** /paylink/{token}/reopen | Reopen Paylink Token
*Citypay Api Client.PaylinkApi* | [**tokenStatusChangesRequest**](docs/PaylinkApi.md#tokenStatusChangesRequest) | **POST** /paylink/token/changes | Paylink Token Audit
*Citypay Api Client.PaylinkApi* | [**tokenStatusRequest**](docs/PaylinkApi.md#tokenStatusRequest) | **GET** /paylink/{token}/status | Paylink Token Status


## Documentation for Models

 - [Citypay Api Client.AccountCreate](docs/AccountCreate.md)
 - [Citypay Api Client.AccountStatus](docs/AccountStatus.md)
 - [Citypay Api Client.Acknowledgement](docs/Acknowledgement.md)
 - [Citypay Api Client.AclCheckRequest](docs/AclCheckRequest.md)
 - [Citypay Api Client.AclCheckResponseModel](docs/AclCheckResponseModel.md)
 - [Citypay Api Client.AirlineAdvice](docs/AirlineAdvice.md)
 - [Citypay Api Client.AirlineSegment](docs/AirlineSegment.md)
 - [Citypay Api Client.AuthReference](docs/AuthReference.md)
 - [Citypay Api Client.AuthReferences](docs/AuthReferences.md)
 - [Citypay Api Client.AuthRequest](docs/AuthRequest.md)
 - [Citypay Api Client.AuthResponse](docs/AuthResponse.md)
 - [Citypay Api Client.AuthenRequired](docs/AuthenRequired.md)
 - [Citypay Api Client.Batch](docs/Batch.md)
 - [Citypay Api Client.BatchReportRequest](docs/BatchReportRequest.md)
 - [Citypay Api Client.BatchReportResponseModel](docs/BatchReportResponseModel.md)
 - [Citypay Api Client.BatchTransaction](docs/BatchTransaction.md)
 - [Citypay Api Client.BatchTransactionResultModel](docs/BatchTransactionResultModel.md)
 - [Citypay Api Client.Bin](docs/Bin.md)
 - [Citypay Api Client.BinLookup](docs/BinLookup.md)
 - [Citypay Api Client.CResAuthRequest](docs/CResAuthRequest.md)
 - [Citypay Api Client.CaptureRequest](docs/CaptureRequest.md)
 - [Citypay Api Client.Card](docs/Card.md)
 - [Citypay Api Client.CardHolderAccount](docs/CardHolderAccount.md)
 - [Citypay Api Client.CardStatus](docs/CardStatus.md)
 - [Citypay Api Client.ChargeRequest](docs/ChargeRequest.md)
 - [Citypay Api Client.CheckBatchStatus](docs/CheckBatchStatus.md)
 - [Citypay Api Client.CheckBatchStatusResponse](docs/CheckBatchStatusResponse.md)
 - [Citypay Api Client.ContactDetails](docs/ContactDetails.md)
 - [Citypay Api Client.Decision](docs/Decision.md)
 - [Citypay Api Client.DirectPostRequest](docs/DirectPostRequest.md)
 - [Citypay Api Client.DirectTokenAuthRequest](docs/DirectTokenAuthRequest.md)
 - [Citypay Api Client.DomainKeyCheckRequest](docs/DomainKeyCheckRequest.md)
 - [Citypay Api Client.DomainKeyRequest](docs/DomainKeyRequest.md)
 - [Citypay Api Client.DomainKeyResponse](docs/DomainKeyResponse.md)
 - [Citypay Api Client.Error](docs/Error.md)
 - [Citypay Api Client.EventDataModel](docs/EventDataModel.md)
 - [Citypay Api Client.Exists](docs/Exists.md)
 - [Citypay Api Client.ExternalMPI](docs/ExternalMPI.md)
 - [Citypay Api Client.ListMerchantsResponse](docs/ListMerchantsResponse.md)
 - [Citypay Api Client.MCC6012](docs/MCC6012.md)
 - [Citypay Api Client.Merchant](docs/Merchant.md)
 - [Citypay Api Client.PaResAuthRequest](docs/PaResAuthRequest.md)
 - [Citypay Api Client.PaylinkAddress](docs/PaylinkAddress.md)
 - [Citypay Api Client.PaylinkAdjustmentRequest](docs/PaylinkAdjustmentRequest.md)
 - [Citypay Api Client.PaylinkAttachmentRequest](docs/PaylinkAttachmentRequest.md)
 - [Citypay Api Client.PaylinkAttachmentResult](docs/PaylinkAttachmentResult.md)
 - [Citypay Api Client.PaylinkBillPaymentTokenRequest](docs/PaylinkBillPaymentTokenRequest.md)
 - [Citypay Api Client.PaylinkCardHolder](docs/PaylinkCardHolder.md)
 - [Citypay Api Client.PaylinkCart](docs/PaylinkCart.md)
 - [Citypay Api Client.PaylinkCartItemModel](docs/PaylinkCartItemModel.md)
 - [Citypay Api Client.PaylinkConfig](docs/PaylinkConfig.md)
 - [Citypay Api Client.PaylinkCustomParam](docs/PaylinkCustomParam.md)
 - [Citypay Api Client.PaylinkEmailNotificationPath](docs/PaylinkEmailNotificationPath.md)
 - [Citypay Api Client.PaylinkErrorCode](docs/PaylinkErrorCode.md)
 - [Citypay Api Client.PaylinkFieldGuardModel](docs/PaylinkFieldGuardModel.md)
 - [Citypay Api Client.PaylinkPartPayments](docs/PaylinkPartPayments.md)
 - [Citypay Api Client.PaylinkSMSNotificationPath](docs/PaylinkSMSNotificationPath.md)
 - [Citypay Api Client.PaylinkStateEvent](docs/PaylinkStateEvent.md)
 - [Citypay Api Client.PaylinkTokenCreated](docs/PaylinkTokenCreated.md)
 - [Citypay Api Client.PaylinkTokenRequestModel](docs/PaylinkTokenRequestModel.md)
 - [Citypay Api Client.PaylinkTokenStatus](docs/PaylinkTokenStatus.md)
 - [Citypay Api Client.PaylinkTokenStatusChangeRequest](docs/PaylinkTokenStatusChangeRequest.md)
 - [Citypay Api Client.PaylinkTokenStatusChangeResponse](docs/PaylinkTokenStatusChangeResponse.md)
 - [Citypay Api Client.PaylinkUI](docs/PaylinkUI.md)
 - [Citypay Api Client.Ping](docs/Ping.md)
 - [Citypay Api Client.ProcessBatchRequest](docs/ProcessBatchRequest.md)
 - [Citypay Api Client.ProcessBatchResponse](docs/ProcessBatchResponse.md)
 - [Citypay Api Client.RefundRequest](docs/RefundRequest.md)
 - [Citypay Api Client.RegisterCard](docs/RegisterCard.md)
 - [Citypay Api Client.RequestChallenged](docs/RequestChallenged.md)
 - [Citypay Api Client.RetrieveRequest](docs/RetrieveRequest.md)
 - [Citypay Api Client.ThreeDSecure](docs/ThreeDSecure.md)
 - [Citypay Api Client.TokenisationResponseModel](docs/TokenisationResponseModel.md)
 - [Citypay Api Client.VoidRequest](docs/VoidRequest.md)


## Documentation for Authorization



### cp-api-key


- **Type**: API key
- **API key parameter name**: cp-api-key
- **Location**: HTTP header



### cp-domain-key


- **Type**: API key
- **API key parameter name**: cp-domain-key
- **Location**: URL query string

